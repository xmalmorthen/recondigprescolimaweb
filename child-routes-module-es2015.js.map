{"version":3,"sources":["./src/app/guards/access.guard.ts","./src/app/pages/child-routes.module.ts"],"names":[],"mappings":"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","file":"child-routes-module-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree, Router } from '@angular/router';\nimport { UserService } from '../services/user.service';\nimport { HandlerErrorsService } from '../services/handler-errors.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AccessGuard implements CanActivate {\n    \n  constructor(\n    private userService: UserService,\n    private handlerErrorsService: HandlerErrorsService,\n    private router: Router,\n  ) {}\n\n  canActivate(\n    route: ActivatedRouteSnapshot,\n    state: RouterStateSnapshot)  {\n    \n    const sessModel = this.userService.storageSessModel;\n    let res = true;\n\n    switch (route.routeConfig.path) {\n      case 'captura':\n        res = sessModel.roles.includes(1) || sessModel.roles.includes(2) || sessModel.roles.includes(4) || sessModel.roles.includes(5)\n        break;\n      case 'consultas':\n        res = sessModel.roles.includes(1) || sessModel.roles.includes(2) || sessModel.roles.includes(6)\n        break;\n      case 'constancias':\n        res =  sessModel.roles.includes(1) || sessModel.roles.includes(2) || sessModel.roles.includes(7)\n        break;\n      case 'catalogo/usuarios':\n      case 'catalogo/delitos':\n      case 'catalogo/juzgados':\n      case 'catalogo/libertades':\n      case 'catalogo/salas':\n        res =  sessModel.roles.includes(1) || sessModel.roles.includes(2) || sessModel.roles.includes(3)\n        break;\n      case 'bitacora':\n        res =  sessModel.roles.includes(1) || sessModel.roles.includes(2)\n        break;\n      default:\n        break;\n    }\n\n    if (!res) {\n      this.handlerErrorsService.showErr(\"Restringido\",{ message: \"Permisos insuficientes\" },'error');\n      this.router.navigate(['/']);\n    }\n\n    return res;\n\n  }\n  \n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DashboardComponent } from './dashboard/dashboard.component';\nimport { CaptureComponent } from './dashboard/capture/capture.component';\nimport { QueryesComponent } from './dashboard/queryes/queryes.component';\nimport { ProofComponent } from './dashboard/proof/proof.component';\nimport { PersonsComponent } from './dashboard/catalogs/persons/persons.component';\nimport { UsersComponent } from './dashboard/catalogs/users/users.component';\nimport { CrimesComponent } from './dashboard/catalogs/crimes/crimes.component';\nimport { CourtComponent } from './dashboard/catalogs/court/court.component';\nimport { FreedomComponent } from './dashboard/catalogs/freedom/freedom.component';\nimport { RoomsComponent } from './dashboard/catalogs/rooms/rooms.component';\nimport { BinnacleComponent } from './dashboard/binnacle/binnacle.component';\nimport { InfoComponent } from './auth/info/info.component';\n\nimport { AccessGuard } from '../guards/access.guard';\n\nconst childsRoutes: Routes = [\n  { path: '', component: DashboardComponent },\n  { path: 'captura', component: CaptureComponent, canActivate: [ AccessGuard ] },\n  { path: 'consultas', component: QueryesComponent , canActivate: [ AccessGuard ]},\n  { path: 'constancias', component: ProofComponent, canActivate: [ AccessGuard ]},\n  { path: 'catalogo/personas', component: PersonsComponent, canActivate: [ AccessGuard ]},\n  { path: 'catalogo/usuarios', component: UsersComponent, canActivate: [ AccessGuard ]},\n  { path: 'catalogo/delitos', component: CrimesComponent, canActivate: [ AccessGuard ]},\n  { path: 'catalogo/juzgados', component: CourtComponent, canActivate: [ AccessGuard ]},\n  { path: 'catalogo/libertades', component: FreedomComponent, canActivate: [ AccessGuard ]},\n  { path: 'catalogo/salas', component: RoomsComponent, canActivate: [ AccessGuard ]},\n  { path: 'bitacora', component: BinnacleComponent, canActivate: [ AccessGuard ]},\n  { path: 'usuario/info', component: InfoComponent, canActivate: [ AccessGuard ]},\n];\n\n\n@NgModule({\n  imports: [RouterModule.forChild(childsRoutes)],\n  exports: [RouterModule]\n})\nexport class ChildRoutesModule { }\n"],"sourceRoot":"webpack:///"}